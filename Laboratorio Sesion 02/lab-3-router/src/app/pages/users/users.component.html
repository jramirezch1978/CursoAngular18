<div class="users-container">
  <header class="page-header">
    <div class="header-content">
      <h1>
        @switch (currentMode) {
          @case ('list') { ğŸ‘¥ GestiÃ³n de Usuarios }
          @case ('view') { ğŸ‘¤ Detalles de Usuario }
          @case ('edit') { âœï¸ Editar Usuario }
          @case ('new') { â• Nuevo Usuario }
        }
      </h1>
      <p class="page-description">
        @switch (currentMode) {
          @case ('list') { 
            Administra usuarios del sistema PROVIAS. Esta pÃ¡gina demuestra navegaciÃ³n 
            con parÃ¡metros y query parameters.
          }
          @case ('view') { 
            Visualiza los detalles completos del usuario seleccionado.
            <strong>ID del usuario:</strong> {{ selectedUserId }}
          }
          @case ('edit') { 
            Modifica la informaciÃ³n del usuario seleccionado.
            <strong>Editando usuario:</strong> {{ selectedUser?.name }}
          }
          @case ('new') { 
            Crea un nuevo usuario en el sistema PROVIAS.
          }
        }
      </p>
    </div>
    
    <div class="header-actions">
      @if (currentMode !== 'list') {
        <button class="btn btn-secondary" (click)="goBackToList()">
          â¬…ï¸ Volver a Lista
        </button>
      }
      @if (currentMode === 'list') {
        <button class="btn btn-secondary" (click)="goToDashboard()">
          ğŸ  Dashboard
        </button>
        <button class="btn btn-primary" (click)="addNewUser()">
          â• Nuevo Usuario
        </button>
      }
    </div>
  </header>

  <!-- ğŸ“Š EstadÃ­sticas rÃ¡pidas -->
  @if (currentMode === 'list') {
    <section class="stats-bar">
    <div class="stat-item">
      <span class="stat-value">{{ users.length }}</span>
      <span class="stat-label">Total Usuarios</span>
    </div>
    <div class="stat-item">
      <span class="stat-value">{{ getActiveUsers().length }}</span>
      <span class="stat-label">Activos</span>
    </div>
    <div class="stat-item">
      <span class="stat-value">{{ getInactiveUsers().length }}</span>
      <span class="stat-label">Inactivos</span>
    </div>
  </section>

    <!-- ğŸ” Filtros -->
    <section class="filters-section">
      <h3>ğŸ” Filtros</h3>
      <div class="filter-buttons">
        <button 
          class="filter-btn" 
          (click)="filterByStatus('all')">
          Todos
        </button>
        <button 
          class="filter-btn" 
          (click)="filterByStatus('active')">
          Solo Activos
        </button>
        <button 
          class="filter-btn" 
          (click)="filterByStatus('inactive')">
          Solo Inactivos
        </button>
      </div>
    </section>

  <!-- ğŸ‘¥ Lista de usuarios -->
  <section class="users-grid">
    @for (user of users; track user.id) {
      <div 
        class="user-card" 
        [class.selected]="isUserSelected(user.id)"
        [class.inactive]="!user.isActive">
        
        <div class="user-avatar">{{ user.avatar }}</div>
        
        <div class="user-info">
          <h3 class="user-name">{{ user.name }}</h3>
          <p class="user-email">ğŸ“§ {{ user.email }}</p>
          <span class="user-role" [class]="getRoleClass(user.role)">
            {{ user.role }}
          </span>
          
          <div class="user-status">
            @if (user.isActive) {
              <span class="status-badge active">âœ… Activo</span>
            } @else {
              <span class="status-badge inactive">âŒ Inactivo</span>
            }
          </div>
        </div>
        
        <div class="user-actions">
          <button 
            class="action-btn view" 
            (click)="viewUser(user.id)"
            title="Ver detalles">
            ğŸ‘ï¸ Ver
          </button>
          <button 
            class="action-btn edit" 
            (click)="editUser(user.id)"
            title="Editar usuario">
            âœï¸ Editar
          </button>
        </div>
      </div>
    }
  </section>
  }

  <!-- ğŸ‘¤ Vista de detalle de usuario -->
  @if (currentMode === 'view' && selectedUser) {
    <section class="user-detail-section">
      <div class="user-detail-card">
        <div class="user-header">
          <div class="user-avatar">{{ selectedUser.avatar }}</div>
          <div class="user-info">
            <h2>{{ selectedUser.name }}</h2>
            <p class="user-email">ğŸ“§ {{ selectedUser.email }}</p>
            <span class="user-role" [class]="getRoleClass(selectedUser.role)">
              {{ selectedUser.role }}
            </span>
            <span class="user-status" [class]="selectedUser.isActive ? 'active' : 'inactive'">
              {{ selectedUser.isActive ? 'âœ… Activo' : 'âŒ Inactivo' }}
            </span>
          </div>
        </div>
        
        <div class="user-details">
          <h3>ğŸ“‹ InformaciÃ³n Detallada</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <strong>ğŸ†” ID:</strong>
              <span>{{ selectedUser.id }}</span>
            </div>
            <div class="detail-item">
              <strong>ğŸ‘¤ Nombre:</strong>
              <span>{{ selectedUser.name }}</span>
            </div>
            <div class="detail-item">
              <strong>ğŸ“§ Email:</strong>
              <span>{{ selectedUser.email }}</span>
            </div>
            <div class="detail-item">
              <strong>ğŸ‘” Rol:</strong>
              <span>{{ selectedUser.role }}</span>
            </div>
            <div class="detail-item">
              <strong>ğŸ“Š Estado:</strong>
              <span>{{ selectedUser.isActive ? 'Activo' : 'Inactivo' }}</span>
            </div>
          </div>
        </div>
        
        <div class="user-actions">
          <button class="btn btn-primary" (click)="editUser(selectedUser.id)">
            âœï¸ Editar Usuario
          </button>
          <button class="btn btn-secondary" (click)="goBackToList()">
            ğŸ“‹ Ver Todos los Usuarios
          </button>
        </div>
      </div>
    </section>
  }

  <!-- âœï¸ Vista de ediciÃ³n de usuario -->
  @if (currentMode === 'edit' && selectedUser) {
    <section class="user-edit-section">
      <div class="edit-form-card">
        <h3>âœï¸ Editando: {{ selectedUser.name }}</h3>
        
        <div class="form-demo">
          <div class="form-group">
            <label>ğŸ‘¤ Nombre:</label>
            <input type="text" [value]="selectedUser.name" class="form-control" readonly>
            <small>ğŸ“ En el LAB 4 este campo serÃ¡ editable con validaciÃ³n</small>
          </div>
          
          <div class="form-group">
            <label>ğŸ“§ Email:</label>
            <input type="email" [value]="selectedUser.email" class="form-control" readonly>
            <small>ğŸ“ En el LAB 4 este campo serÃ¡ editable con validaciÃ³n</small>
          </div>
          
          <div class="form-group">
            <label>ğŸ‘” Rol:</label>
            <select class="form-control" disabled>
              <option [value]="selectedUser.role" selected>{{ selectedUser.role }}</option>
            </select>
            <small>ğŸ“ En el LAB 4 habrÃ¡ opciones seleccionables</small>
          </div>
          
          <div class="form-group">
            <label>ğŸ“Š Estado:</label>
            <input type="checkbox" [checked]="selectedUser.isActive" disabled>
            <span>Usuario activo</span>
            <small>ğŸ“ En el LAB 4 serÃ¡ modificable</small>
          </div>
        </div>
        
        <div class="edit-actions">
          <button class="btn btn-success" (click)="saveUser()">
            ğŸ’¾ Guardar Cambios (Demo)
          </button>
          <button class="btn btn-secondary" (click)="cancelEdit()">
            âŒ Cancelar
          </button>
        </div>
        
        <div class="demo-note">
          <h4>ğŸ“ Nota Educativa:</h4>
          <p>
            Este es el <strong>LAB 3 - Router</strong>, enfocado en navegaciÃ³n.
            Los formularios funcionales completos estÃ¡n en el <strong>LAB 4 - Guards</strong>.
          </p>
        </div>
      </div>
    </section>
  }

  <!-- â• Vista de nuevo usuario -->
  @if (currentMode === 'new') {
    <section class="new-user-section">
      <div class="new-form-card">
        <h3>â• Crear Nuevo Usuario</h3>
        
        <div class="demo-note">
          <p>
            <strong>ğŸ“ Demo de Ruta:</strong> EstÃ¡s en <code>/users/new</code>
          </p>
          <p>
            En el LAB 4 encontrarÃ¡s el formulario completo para crear usuarios
            con validaciÃ³n y guards de seguridad.
          </p>
        </div>
        
        <div class="new-actions">
          <button class="btn btn-primary" (click)="goBackToList()">
            ğŸ“‹ Ver Lista de Usuarios
          </button>
        </div>
      </div>
    </section>
  }

  <!-- ğŸ§­ Demo de navegaciÃ³n -->
  @if (currentMode === 'list') {
    <section class="navigation-demo">
    <h3>ğŸ§­ Demo de NavegaciÃ³n Angular Router</h3>
    
    <div class="demo-info">
      <div class="demo-section">
        <h4>ğŸ“ Rutas Implementadas</h4>
        <ul class="route-list">
          <li><code>/users</code> - Lista de usuarios (esta pÃ¡gina)</li>
          <li><code>/users/:id</code> - Detalles de usuario especÃ­fico</li>
          <li><code>/users/:id/edit</code> - Editar usuario especÃ­fico</li>
          <li><code>/users/new</code> - Crear nuevo usuario</li>
        </ul>
      </div>
      
      <div class="demo-section">
        <h4>ğŸ¯ Funcionalidades Demostradas</h4>
        <ul class="feature-list">
          <li>âœ… NavegaciÃ³n programÃ¡tica con <code>Router.navigate()</code></li>
          <li>âœ… ParÃ¡metros de ruta <code>:id</code></li>
          <li>âœ… Query parameters <code>?filter=active</code></li>
          <li>âœ… Rutas anidadas para acciones especÃ­ficas</li>
        </ul>
      </div>
    </div>
    
    <div class="test-navigation">
      <h4>ğŸ® Prueba la NavegaciÃ³n</h4>
      <p>Haz clic en "Ver" o "Editar" en cualquier usuario para ver cÃ³mo funcionan los parÃ¡metros de ruta.</p>
      
      <div class="nav-examples">
        <button 
          class="example-btn" 
          (click)="viewUser(1)">
          ğŸ‘ï¸ Ver Usuario #1
        </button>
        <button 
          class="example-btn" 
          (click)="editUser(2)">
          âœï¸ Editar Usuario #2
        </button>
        <button 
          class="example-btn" 
          (click)="filterByStatus('active')">
          ğŸ” Filtrar Activos
        </button>
      </div>
    </div>
  </section>
  }
</div>