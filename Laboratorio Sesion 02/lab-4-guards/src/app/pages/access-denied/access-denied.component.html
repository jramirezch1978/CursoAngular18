<div class="access-denied-container">
  <!-- ğŸ”’ Header principal -->
  <header class="error-header">
    <div class="error-icon">ğŸ”’</div>
    <h1 class="error-title">{{ getErrorTitle() }}</h1>
    <p class="error-message">{{ getErrorMessage() }}</p>
  </header>

  <!-- ğŸ“Š InformaciÃ³n del acceso -->
  <section class="access-info">
    <div class="info-card">
      <h2>ğŸ“‹ Detalles del Acceso Denegado</h2>
      
      <div class="info-grid">
        @if (attemptedUrl) {
          <div class="info-item">
            <label>ğŸ”— URL Solicitada:</label>
            <code class="url-code">{{ attemptedUrl }}</code>
          </div>
        }
        
        @if (reason) {
          <div class="info-item">
            <label>ğŸ“ Motivo:</label>
            <span class="reason-text">{{ reason }}</span>
          </div>
        }
        
        @if (requiredPermissions.length > 0) {
          <div class="info-item permissions-item">
            <label>ğŸ”‘ Permisos Requeridos:</label>
            <div class="permissions-list">
              @for (permission of getFormattedPermissions(); track $index) {
                <span class="permission-badge required">{{ permission }}</span>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </section>

  <!-- ğŸ‘¤ InformaciÃ³n del usuario actual -->
  @if (currentUser) {
    <section class="user-info">
      <div class="user-card">
        <h2>ğŸ‘¤ Tu InformaciÃ³n de Usuario</h2>
        
        <div class="user-details">
          <div class="user-summary">
            <div class="user-avatar">{{ currentUser.avatar || 'ğŸ‘¤' }}</div>
            <div class="user-data">
              <h3>{{ currentUser.fullName }}</h3>
              <p class="user-email">ğŸ“§ {{ currentUser.email }}</p>
              <p class="user-role">ğŸ­ Rol: {{ currentUser.role }}</p>
            </div>
          </div>
          
          <div class="user-permissions">
            <h4>ğŸ”‘ Tus Permisos Actuales ({{ currentUser.permissions.length }}):</h4>
            <div class="current-permissions">
              @for (permission of currentUser.permissions; track permission) {
                <span class="permission-badge current">{{ permission }}</span>
              }
            </div>
          </div>
        </div>
      </div>
    </section>
  }

  <!-- ğŸ¯ Acciones sugeridas -->
  <section class="suggested-actions">
    <h2>ğŸ’¡ Â¿QuÃ© Puedes Hacer?</h2>
    
    <div class="actions-grid">
      @for (action of suggestedActions; track action.title) {
        <div class="action-card" (click)="action.action()">
          <div class="action-icon">{{ action.icon }}</div>
          <div class="action-content">
            <h3>{{ action.title }}</h3>
            <p>{{ action.description }}</p>
          </div>
          <div class="action-arrow">â¡ï¸</div>
        </div>
      }
    </div>
  </section>

  <!-- ğŸ“ InformaciÃ³n educativa sobre guards -->
  <section class="educational-section">
    <h2>ğŸ“ Sobre el Control de Acceso en Angular</h2>
    
    <div class="concepts-grid">
      <div class="concept">
        <h4>ğŸ›¡ï¸ Guards en Angular</h4>
        <p>Los guards protegen rutas verificando condiciones antes del acceso:</p>
        <ul>
          <li><strong>AuthGuard:</strong> Verifica autenticaciÃ³n</li>
          <li><strong>AdminGuard:</strong> Verifica permisos especÃ­ficos</li>
          <li><strong>RoleGuard:</strong> Verifica roles de usuario</li>
        </ul>
      </div>
      
      <div class="concept">
        <h4>ğŸ” Control de Permisos</h4>
        <p>Sistema granular de autorizaciÃ³n:</p>
        <ul>
          <li><strong>Roles:</strong> Agrupaciones de permisos</li>
          <li><strong>Permisos:</strong> Acciones especÃ­ficas</li>
          <li><strong>Recursos:</strong> Funcionalidades protegidas</li>
        </ul>
      </div>
      
      <div class="concept">
        <h4>ğŸ­ JerarquÃ­a de Roles</h4>
        <p>Estructura organizacional de PROVIAS:</p>
        <ul>
          <li><strong>Admin:</strong> Control total del sistema</li>
          <li><strong>Project Manager:</strong> GestiÃ³n de proyectos</li>
          <li><strong>Engineer:</strong> Trabajo tÃ©cnico</li>
          <li><strong>Technician:</strong> Operaciones bÃ¡sicas</li>
        </ul>
      </div>
      
      <div class="concept">
        <h4>ğŸ”„ Flujo de AutorizaciÃ³n</h4>
        <p>Proceso de verificaciÃ³n de acceso:</p>
        <ul>
          <li><strong>1.</strong> Verificar autenticaciÃ³n</li>
          <li><strong>2.</strong> Obtener rol del usuario</li>
          <li><strong>3.</strong> Verificar permisos</li>
          <li><strong>4.</strong> Permitir/Denegar acceso</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ğŸš¨ InformaciÃ³n de seguridad -->
  <section class="security-info">
    <div class="security-card">
      <h2>ğŸš¨ InformaciÃ³n de Seguridad</h2>
      
      <div class="security-content">
        <div class="security-notice">
          <h4>ğŸ” Â¿Por quÃ© es importante el control de acceso?</h4>
          <p>
            El sistema de permisos protege informaciÃ³n sensible y funcionalidades crÃ­ticas.
            Cada intento de acceso no autorizado es registrado para auditorÃ­a.
          </p>
        </div>
        
        <div class="security-actions">
          <h4>ğŸ“‹ Este evento ha sido registrado:</h4>
          <ul>
            <li>âœ… Timestamp del intento de acceso</li>
            <li>âœ… Usuario que intentÃ³ acceder</li>
            <li>âœ… Recurso al que se intentÃ³ acceder</li>
            <li>âœ… Motivo de la denegaciÃ³n</li>
          </ul>
        </div>
        
        <div class="security-contact">
          <h4>ğŸ†˜ Â¿Necesitas ayuda?</h4>
          <p>
            Si crees que este es un error o necesitas permisos adicionales,
            contacta al administrador del sistema.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ğŸ® Controles de navegaciÃ³n -->
  <section class="navigation-controls">
    <div class="controls-grid">
      <button class="control-btn primary" (click)="goToDashboard()">
        ğŸ  Ir al Dashboard
      </button>
      
      <button class="control-btn secondary" (click)="goBack()">
        â¬…ï¸ Volver AtrÃ¡s
      </button>
      
      <button class="control-btn info" (click)="goToLogin()">
        ğŸ” Cambiar Usuario
      </button>
      
      <button class="control-btn help" (click)="showHelp()">
        â“ Ayuda
      </button>
    </div>
  </section>

  <!-- ğŸ‘¨â€ğŸ’¼ Contacto administrativo -->
  <footer class="admin-contact">
    <div class="contact-info">
      <h3>ğŸ‘¨â€ğŸ’¼ Contacto Administrativo</h3>
      <div class="contact-details">
        <p>ğŸ“§ Email: admin&#64;provias.gob.pe</p>
        <p>ğŸ“ TelÃ©fono: (01) 615-7800</p>
        <p>ğŸ• Horario: Lunes a Viernes, 8:00 AM - 6:00 PM</p>
      </div>
    </div>
  </footer>
</div>