<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="welcome-section">
      <h1>ğŸ  Dashboard PROVIAS</h1>
      @if (currentUser) {
        <p class="welcome-text">
          Bienvenido, <strong>{{ currentUser.fullName }}</strong>
          <span class="user-role">({{ currentUser.role }})</span>
        </p>
      }
      <p class="description">
        Esta pÃ¡gina estÃ¡ protegida por <code>AuthGuard</code> - Solo usuarios autenticados pueden acceder
      </p>
    </div>
    
    <div class="header-actions">
      <button class="btn btn-danger" (click)="logout()">
        ğŸšª Cerrar SesiÃ³n
      </button>
    </div>
  </header>

  <!-- ğŸ“Š EstadÃ­sticas -->
  <section class="stats-section">
    <h2>ğŸ“Š Resumen del Sistema</h2>
    
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ—ï¸</div>
        <div class="stat-info">
          <h3>{{ stats.totalProjects }}</h3>
          <p>Proyectos Totales</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-info">
          <h3>{{ stats.activeUsers }}</h3>
          <p>Usuarios Activos</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-info">
          <h3>{{ stats.completedTasks }}</h3>
          <p>Tareas Completadas</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-info">
          <h3>{{ stats.pendingReviews }}</h3>
          <p>Revisiones Pendientes</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ğŸš€ Acciones rÃ¡pidas -->
  <section class="quick-actions">
    <h2>ğŸš€ Acciones Disponibles</h2>
    <p class="actions-description">
      Las siguientes acciones estÃ¡n disponibles segÃºn tus permisos actuales:
    </p>
    
    <div class="actions-grid">
      @for (action of getAvailableActions(); track action.route) {
        <div class="action-card" (click)="navigateTo(action.route)">
          <div class="action-icon">{{ action.icon }}</div>
          <div class="action-content">
            <h3>{{ action.title }}</h3>
            <p>{{ action.description }}</p>
            <small class="permission-info">Permiso: {{ action.requiredPermission }}</small>
          </div>
          <div class="action-arrow">â¡ï¸</div>
        </div>
      }
    </div>
    
    @if (getAvailableActions().length === 0) {
      <div class="no-actions">
        <p>âŒ No tienes permisos para realizar acciones adicionales</p>
        <p>Contacta al administrador para obtener mÃ¡s permisos</p>
      </div>
    }
  </section>

  <!-- ğŸ” InformaciÃ³n de permisos -->
  @if (currentUser) {
    <section class="permissions-section">
      <h2>ğŸ” Tus Permisos Actuales</h2>
      
      <div class="permissions-info">
        <div class="user-summary">
          <div class="user-avatar">{{ currentUser.avatar || 'ğŸ‘¤' }}</div>
          <div class="user-details">
            <h3>{{ currentUser.fullName }}</h3>
            <p><strong>Email:</strong> {{ currentUser.email }}</p>
            <p><strong>Rol:</strong> {{ currentUser.role }}</p>
            <p><strong>Permisos:</strong> {{ currentUser.permissions.length }} asignados</p>
          </div>
        </div>
        
        <div class="permissions-list">
          <h4>ğŸ“‹ Lista de Permisos:</h4>
          <div class="permissions-grid">
            @for (permission of currentUser.permissions; track permission) {
              <span class="permission-badge">{{ permission }}</span>
            }
          </div>
        </div>
      </div>
    </section>
  }

  <!-- ğŸ“ InformaciÃ³n educativa sobre guards -->
  <section class="educational-section">
    <h2>ğŸ“ LAB 4: DemostraciÃ³n de Guards</h2>
    
    <div class="concepts-grid">
      <div class="concept">
        <h4>ğŸ›¡ï¸ AuthGuard Activo</h4>
        <p>Esta pÃ¡gina estÃ¡ protegida por AuthGuard</p>
        <ul>
          <li>âœ… VerificÃ³ que estÃ©s autenticado</li>
          <li>âœ… Te redirigiÃ³ aquÃ­ despuÃ©s del login</li>
          <li>âœ… Si no estuvieras autenticado â†’ /login</li>
        </ul>
      </div>
      
      <div class="concept">
        <h4>ğŸ‘‘ AdminGuard Disponible</h4>
        <p>Algunas acciones requieren permisos especiales</p>
        <ul>
          <li>ğŸ”’ Panel de Admin (solo admins)</li>
          <li>âš ï¸ Si intentas acceder sin permisos â†’ /access-denied</li>
          <li>âœ… Guards verifican permisos antes de navegar</li>
        </ul>
      </div>
      
      <div class="concept">
        <h4>ğŸ“¦ Lazy Loading</h4>
        <p>Componentes se cargan bajo demanda</p>
        <ul>
          <li>âœ… Este componente se cargÃ³ solo cuando accediste</li>
          <li>âœ… Guards se ejecutan antes del lazy loading</li>
          <li>âœ… Mejora el rendimiento inicial</li>
        </ul>
      </div>
    </div>
    
    <div class="test-guards">
      <h4>ğŸ§ª Prueba los Guards</h4>
      <div class="test-actions">
        <button class="test-btn" (click)="navigateTo('/admin')">
          ğŸ‘‘ Intentar Acceder a Admin
        </button>
        <button class="test-btn" (click)="logout()">
          ğŸšª Cerrar SesiÃ³n (Activar AuthGuard)
        </button>
      </div>
      <p class="test-description">
        Observa cÃ³mo los guards manejan el acceso segÃºn tus permisos
      </p>
    </div>
  </section>
</div>