<div class="users-container">
  <header class="page-header">
    <div class="header-content">
      <h1>ğŸ‘¥ GestiÃ³n de Usuarios</h1>
      <p class="page-description">
        Esta pÃ¡gina estÃ¡ protegida por <code>AuthGuard</code>
      </p>
      <p class="route-info">
        <strong>Ruta actual:</strong> <code>{{ currentRoute }}</code>
      </p>
      @if (routeParams && Object.keys(routeParams).length > 0) {
        <p class="params-info">
          <strong>ParÃ¡metros:</strong> <code>{{ routeParams | json }}</code>
        </p>
      }
    </div>
    
    <div class="header-actions">
      <button class="btn btn-secondary" (click)="goToDashboard()">
        ğŸ  Dashboard
      </button>
      <button class="btn btn-danger" (click)="logout()">
        ğŸšª Salir
      </button>
    </div>
  </header>

  <!-- ğŸ‘¥ Lista de usuarios -->
  <section class="users-section">
    <h2>ğŸ“‹ Lista de Usuarios</h2>
    
    <div class="users-grid">
      @for (user of users; track user.id) {
        <div class="user-card" [class]="user.status">
          <div class="user-info">
            <h3>{{ user.name }}</h3>
            <p class="user-role">{{ user.role }}</p>
            <span class="user-status" [class]="user.status">
              {{ user.status === 'active' ? 'Activo' : 'Inactivo' }}
            </span>
          </div>
        </div>
      }
    </div>
  </section>

  <!-- ğŸ” InformaciÃ³n de permisos -->
  <section class="permissions-demo">
    <h2>ğŸ” Demo de Permisos</h2>
    
    <div class="permissions-cards">
      <div class="permission-card">
        <h4>ğŸ‘¥ Ver Usuarios</h4>
        <p class="permission-status">
          @if (hasPermission('users:view')) {
            âœ… <strong>Tienes este permiso</strong>
          } @else {
            âŒ <strong>No tienes este permiso</strong>
          }
        </p>
        <small>Permiso: users:view</small>
      </div>
      
      <div class="permission-card">
        <h4>âœï¸ Editar Usuarios</h4>
        <p class="permission-status">
          @if (hasPermission('users:edit')) {
            âœ… <strong>Tienes este permiso</strong>
          } @else {
            âŒ <strong>No tienes este permiso</strong>
          }
        </p>
        <small>Permiso: users:edit</small>
      </div>
      
      <div class="permission-card">
        <h4>ğŸ‘‘ Panel Admin</h4>
        <p class="permission-status">
          @if (hasPermission('admin:panel')) {
            âœ… <strong>Tienes este permiso</strong>
          } @else {
            âŒ <strong>No tienes este permiso</strong>
          }
        </p>
        <small>Permiso: admin:panel</small>
      </div>
    </div>
  </section>

  <!-- ğŸ§ª Pruebas de guards -->
  <section class="guards-test">
    <h2>ğŸ§ª Prueba los Guards</h2>
    
    <div class="test-cards">
      <div class="test-card">
        <h4>ğŸ‘‘ AdminGuard</h4>
        <p>Intenta acceder al panel de administraciÃ³n</p>
        <button class="test-btn" (click)="tryAccessAdmin()">
          Acceder a Admin
        </button>
        <small>
          @if (hasPermission('admin:panel')) {
            âœ… DeberÃ­as poder acceder
          } @else {
            âŒ DeberÃ­as ser redirigido a /access-denied
          }
        </small>
      </div>
      
      <div class="test-card">
        <h4>ğŸ›¡ï¸ AuthGuard</h4>
        <p>Cierra sesiÃ³n para probar AuthGuard</p>
        <button class="test-btn danger" (click)="logout()">
          Cerrar SesiÃ³n
        </button>
        <small>
          ğŸ”„ DespuÃ©s del logout, intenta acceder a rutas protegidas
        </small>
      </div>
    </div>
  </section>

  <!-- ğŸ“ InformaciÃ³n educativa -->
  <section class="educational-section">
    <h2>ğŸ“ Guards en AcciÃ³n</h2>
    
    <div class="concepts-grid">
      <div class="concept">
        <h4>ğŸ›¡ï¸ AuthGuard</h4>
        <p>Ya verificÃ³ tu autenticaciÃ³n para mostrarte esta pÃ¡gina</p>
        <ul>
          <li>âœ… Usuario autenticado</li>
          <li>âœ… Token vÃ¡lido</li>
          <li>âœ… SesiÃ³n activa</li>
        </ul>
      </div>
      
      <div class="concept">
        <h4>ğŸ” Control de Permisos</h4>
        <p>Las acciones se habilitan segÃºn tus permisos</p>
        <ul>
          <li>âœ… VerificaciÃ³n en tiempo real</li>
          <li>âœ… UI dinÃ¡mica</li>
          <li>âœ… Seguridad a nivel de funciÃ³n</li>
        </ul>
      </div>
      
      <div class="concept">
        <h4>ğŸ“¦ Lazy Loading</h4>
        <p>Este componente se cargÃ³ bajo demanda</p>
        <ul>
          <li>âœ… Bundle separado</li>
          <li>âœ… Carga diferida</li>
          <li>âœ… Guards antes de cargar</li>
        </ul>
      </div>
    </div>
  </section>
</div>