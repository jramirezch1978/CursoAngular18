<div class="custom-directives-demo">
  <!-- Header -->
  <header class="demo-header">
    <h1>‚ö° Directivas Personalizadas Avanzadas</h1>
    <p>Demostraci√≥n de HostListener, HostBinding, Renderer2 y manipulaci√≥n del DOM</p>
  </header>

  <!-- Navigation Tabs -->
  <nav class="demo-tabs">
    <button 
      class="tab-button"
      [class.active]="activeSection() === 'tooltip'"
      (click)="setActiveSection('tooltip')">
      üè∑Ô∏è Tooltip Directive
    </button>
    <button 
      class="tab-button"
      [class.active]="activeSection() === 'lazy-load'"
      (click)="setActiveSection('lazy-load')">
      üñºÔ∏è Lazy Load Directive
    </button>
    <button 
      class="tab-button"
      [class.active]="activeSection() === 'validation'"
      (click)="setActiveSection('validation')">
      ‚úÖ Validation Feedback Directive
    </button>
  </nav>

  <!-- Tooltip Directive Demo -->
  @if (activeSection() === 'tooltip') {
    <section class="demo-section tooltip-section">
      <div class="section-header">
        <h2>üè∑Ô∏è Tooltip Directive</h2>
        <p>Tooltips avanzados con posicionamiento autom√°tico, temas y animaciones</p>
      </div>

      <div class="demo-grid">
        <div class="demo-card">
          <h3>Ejemplos B√°sicos</h3>
          <div class="tooltip-examples">
            @for (demo of tooltipDemos; track demo.id) {
              <div class="tooltip-demo-item">
                <button 
                  class="demo-button"
                  [appTooltip]="demo.tooltip"
                  [tooltipPlacement]="demo.placement"
                  [tooltipTheme]="demo.theme"
                  [tooltipDelay]="300">
                  {{ demo.text }}
                </button>
                <small>{{ demo.placement }} - {{ demo.theme }}</small>
              </div>
            }
          </div>
        </div>

        <div class="demo-card">
          <h3>Tooltips en Formularios</h3>
          <div class="form-group">
            <label>Nombre:</label>
            <input 
              type="text"
              class="form-control"
              appTooltip="Ingrese su nombre completo"
              tooltipPlacement="right"
              tooltipTheme="info">
          </div>
          
          <div class="form-group">
            <label>Email:</label>
            <input 
              type="email"
              class="form-control"
              appTooltip="Formato: usuario@dominio.com"
              tooltipPlacement="bottom"
              tooltipTheme="light">
          </div>
        </div>
      </div>
    </section>
  }

  <!-- Lazy Load Demo -->
  @if (activeSection() === 'lazy-load') {
    <section class="demo-section lazy-load-section">
      <div class="section-header">
        <h2>üñºÔ∏è Lazy Load Directive</h2>
        <p>Carga diferida con IntersectionObserver</p>
      </div>

      <div class="demo-grid">
        <div class="demo-card full-width">
          <h3>Galer√≠a con Lazy Loading</h3>
          <div class="image-gallery">
            @for (image of lazyImages; track image.id) {
              <div class="image-container">
                <img 
                  class="lazy-image"
                  [appLazyLoad]="image.src"
                  [lazyLoadThreshold]="'100px'"
                  [lazyLoadFadeIn]="true"
                  (lazyLoadStart)="onLazyLoadStart()"
                  (lazyLoadSuccess)="onLazyLoadSuccess(image.src)"
                  (lazyLoadError)="onLazyLoadError($event)"
                  [alt]="image.title">
                
                <div class="image-overlay">
                  <h4>{{ image.title }}</h4>
                  <p>{{ image.description }}</p>
                </div>
              </div>
            }
          </div>
        </div>
      </div>

      <div class="demo-controls">
        <button class="btn btn-primary" (click)="addMoreImages()">
          ‚ûï Agregar M√°s
        </button>
        <button class="btn btn-warning" (click)="clearImages()">
          üóëÔ∏è Limpiar
        </button>
      </div>
    </section>
  }

  <!-- Validation Demo -->
  @if (activeSection() === 'validation') {
    <section class="demo-section validation-section">
      <div class="section-header">
        <h2>‚úÖ Validation Feedback</h2>
        <p>Validaci√≥n en tiempo real con feedback visual</p>
      </div>

      <div class="demo-grid">
        <div class="demo-card">
          <h3>Formulario de Usuario</h3>
          <form [formGroup]="userForm" (ngSubmit)="onSubmitUserForm()">
            <div class="form-group">
              <label>Nombre *</label>
              <input 
                type="text"
                formControlName="name"
                class="form-control"
                appValidationFeedback
                [validationMessages]="validationMessages">
            </div>

            <div class="form-group">
              <label>Email *</label>
              <input 
                type="email"
                formControlName="email"
                class="form-control"
                appValidationFeedback
                [validationMessages]="validationMessages">
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Enviar</button>
              <button type="button" class="btn btn-secondary" (click)="resetUserForm()">Limpiar</button>
              <button type="button" class="btn btn-info" (click)="fillSampleData()">Ejemplo</button>
            </div>
          </form>
        </div>

        <div class="demo-card">
          <h3>Estado del Formulario</h3>
          <div class="form-status">
            <p><strong>V√°lido:</strong> {{ userForm.valid ? 'S√≠' : 'No' }}</p>
            <p><strong>Tocado:</strong> {{ userForm.touched ? 'S√≠' : 'No' }}</p>
            <p><strong>Modificado:</strong> {{ userForm.dirty ? 'S√≠' : 'No' }}</p>
          </div>
        </div>
      </div>
    </section>
  }

  <!-- Resumen -->
  <section class="directives-summary">
    <h2>üìö Directivas Implementadas</h2>
    <div class="summary-grid">
      <div class="summary-card">
        <h3>TooltipDirective</h3>
        <p>HostListener, posicionamiento autom√°tico, temas m√∫ltiples</p>
      </div>
      
      <div class="summary-card">
        <h3>LazyLoadDirective</h3>
        <p>IntersectionObserver, gesti√≥n de errores, placeholders</p>
      </div>
      
      <div class="summary-card">
        <h3>ValidationFeedbackDirective</h3>
        <p>Reactive Forms, HostBinding, feedback visual</p>
      </div>
    </div>
  </section>
</div>
