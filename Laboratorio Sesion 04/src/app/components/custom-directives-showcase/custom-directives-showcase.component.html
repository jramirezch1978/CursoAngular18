<div class="custom-directives-showcase">
  <!-- Header -->
  <header class="showcase-header">
    <h1>ğŸš€ Directivas Personalizadas Avanzadas</h1>
    <p class="subtitle">DemostraciÃ³n de HostListener, HostBinding y Renderer2 en acciÃ³n</p>
  </header>

  <!-- SecciÃ³n de Tooltips -->
  <section class="demo-section">
    <h2>ğŸ’¬ Tooltips Inteligentes</h2>
    <p>Hover sobre los elementos para ver tooltips personalizados</p>
    
    <div class="tooltip-demos">
      <button 
        class="demo-button primary"
        appTooltip="Este es un tooltip bÃ¡sico que aparece arriba"
        tooltipPosition="top"
        [tooltipDelay]="300">
        ğŸ” Tooltip Arriba
      </button>
      
      <button 
        class="demo-button secondary"
        appTooltip="Tooltip con posiciÃ³n personalizada abajo"
        tooltipPosition="bottom"
        [tooltipDelay]="500">
        ğŸ”» Tooltip Abajo
      </button>
      
      <button 
        class="demo-button success"
        appTooltip="Tooltip a la izquierda con informaciÃ³n detallada"
        tooltipPosition="left"
        tooltipClass="tooltip-large">
        â¬…ï¸ Tooltip Izquierda
      </button>
      
      <button 
        class="demo-button warning"
        appTooltip="Tooltip a la derecha con animaciÃ³n"
        tooltipPosition="right"
        [tooltipDelay]="200">
        â¡ï¸ Tooltip Derecha
      </button>
    </div>

    <div class="feature-highlights">
      <div 
        class="feature-card"
        appTooltip="ğŸ¯ HostListener detecta eventos de mouse automÃ¡ticamente"
        tooltipPosition="top">
        <h4>ğŸ§ HostListener</h4>
        <p>Escucha eventos mouseenter/mouseleave automÃ¡ticamente</p>
      </div>
      
      <div 
        class="feature-card"
        appTooltip="ğŸ¨ Renderer2 crea elementos DOM de forma segura"
        tooltipPosition="top">
        <h4>ğŸ›¡ï¸ Renderer2</h4>
        <p>ManipulaciÃ³n segura del DOM sin riesgos XSS</p>
      </div>
      
      <div 
        class="feature-card"
        appTooltip="âš¡ Posicionamiento dinÃ¡mico inteligente"
        tooltipPosition="top">
        <h4>ğŸ“ Posicionamiento</h4>
        <p>Calcula automÃ¡ticamente la mejor posiciÃ³n</p>
      </div>
    </div>
  </section>

  <!-- SecciÃ³n de Lazy Loading -->
  <section class="demo-section">
    <h2>ğŸ–¼ï¸ Lazy Loading de ImÃ¡genes</h2>
    <p>Las imÃ¡genes se cargan automÃ¡ticamente cuando entran en el viewport</p>
    
    <div class="lazy-load-grid">
      @for (item of demoItems(); track item.id) {
        <div class="project-card">
          <div 
            class="project-image"
            [appLazyLoad]="item.image"
            lazyLoadPlaceholder="https://via.placeholder.com/400x300?text=Cargando..."
            lazyLoadError="https://via.placeholder.com/400x300?text=Error"
            [lazyLoadThreshold]="0.2"
            lazyLoadRootMargin="100px"
            [appTooltip]="'Proyecto: ' + item.title + ' - CategorÃ­a: ' + item.category"
            tooltipPosition="top">
          </div>
          
          <div class="project-info">
            <h4>{{ item.title }}</h4>
            <p class="project-description">{{ item.description }}</p>
            <div class="project-meta">
              <span 
                class="project-category"
                [appTooltip]="'CategorÃ­a del proyecto'"
                tooltipPosition="top">
                ğŸ·ï¸ {{ item.category }}
              </span>
              <span 
                class="project-rating"
                [appTooltip]="'CalificaciÃ³n: ' + item.rating + '/5 estrellas'"
                tooltipPosition="top">
                {{ getRatingStars(item.rating) }} {{ item.rating }}
              </span>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="lazy-loading-info">
      <div class="info-card">
        <h4>ğŸ“Š IntersectionObserver</h4>
        <p>API moderna para detectar cuando elementos entran en viewport</p>
      </div>
      <div class="info-card">
        <h4>ğŸ­ HostBinding</h4>
        <p>Clases CSS dinÃ¡micas para estados: loading, loaded, error</p>
      </div>
      <div class="info-card">
        <h4>âš¡ Performance</h4>
        <p>Solo carga imÃ¡genes cuando son necesarias, mejorando velocidad</p>
      </div>
    </div>
  </section>

  <!-- SecciÃ³n de ValidaciÃ³n -->
  <section class="demo-section">
    <h2>âœ… ValidaciÃ³n Visual Avanzada</h2>
    <p>Formulario con feedback visual inmediato y validaciÃ³n en tiempo real</p>
    
    <form class="validation-form" (ngSubmit)="submitForm()">
      <div class="form-row">
        <div class="form-group">
          <label for="name">Nombre Completo *</label>
          <input 
            id="name"
            type="text"
            class="form-control"
            [value]="contactForm().name"
            (input)="updateForm('name', $any($event.target).value)"
            placeholder="Ingrese su nombre completo"
            appValidationFeedback
            [appValidationFeedback]="validationState().name"
            [validationMessage]="getValidationMessage('name')"
            [showOnBlur]="true"
            [showOnDirty]="true">
        </div>
        
        <div class="form-group">
          <label for="email">
            Email *
            @if (validationState().email === 'pending') {
              <span class="validating">ğŸ”„ Validando...</span>
            }
          </label>
          <input 
            id="email"
            type="email"
            class="form-control"
            [value]="contactForm().email"
            (input)="updateForm('email', $any($event.target).value)"
            placeholder="ejemplo@empresa.com"
            appValidationFeedback
            [appValidationFeedback]="validationState().email"
            [validationMessage]="getValidationMessage('email')"
            [showOnBlur]="true"
            [showOnDirty]="true">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="phone">TelÃ©fono</label>
          <input 
            id="phone"
            type="tel"
            class="form-control"
            [value]="contactForm().phone"
            (input)="updateForm('phone', $any($event.target).value)"
            placeholder="+51 987 654 321"
            appValidationFeedback
            [appValidationFeedback]="validationState().phone"
            [validationMessage]="getValidationMessage('phone')"
            [showOnBlur]="true">
        </div>
        
        <div class="form-group">
          <label for="company">Empresa *</label>
          <input 
            id="company"
            type="text"
            class="form-control"
            [value]="contactForm().company"
            (input)="updateForm('company', $any($event.target).value)"
            placeholder="Nombre de su empresa"
            appValidationFeedback
            [appValidationFeedback]="validationState().company"
            [validationMessage]="getValidationMessage('company')"
            [showOnBlur]="true"
            [showOnDirty]="true">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="projectType">Tipo de Proyecto</label>
          <select 
            id="projectType"
            class="form-control"
            [value]="contactForm().projectType"
            (change)="updateForm('projectType', $any($event.target).value)"
            appTooltip="Seleccione el tipo de proyecto que mÃ¡s se ajuste a sus necesidades"
            tooltipPosition="top">
            <option value="">Seleccione...</option>
            @for (type of projectTypes; track type) {
              <option [value]="type">{{ type }}</option>
            }
          </select>
        </div>
        
        <div class="form-group">
          <label for="budget">Presupuesto Estimado</label>
          <select 
            id="budget"
            class="form-control"
            [value]="contactForm().budget"
            (change)="updateForm('budget', $any($event.target).value)"
            [appTooltip]="formatBudget(contactForm().budget)"
            tooltipPosition="top">
            <option value="">Seleccione rango...</option>
            @for (range of budgetRanges; track range) {
              <option [value]="range">{{ range }}</option>
            }
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="message">Mensaje *</label>
        <textarea 
          id="message"
          class="form-control"
          rows="4"
          [value]="contactForm().message"
          (input)="updateForm('message', $any($event.target).value)"
          placeholder="Describa su proyecto y requerimientos especÃ­ficos..."
          appValidationFeedback
          [appValidationFeedback]="validationState().message"
          [validationMessage]="getValidationMessage('message')"
          [showOnBlur]="true"
          [showOnDirty]="true">
        </textarea>
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary"
          (click)="resetForm()"
          appTooltip="Limpiar todos los campos del formulario"
          tooltipPosition="top">
          ğŸ§¹ Limpiar
        </button>
        
        <button 
          type="submit" 
          class="btn btn-primary"
          appTooltip="Enviar formulario de contacto"
          tooltipPosition="top">
          ğŸ“¨ Enviar Consulta
        </button>
      </div>
    </form>

    <div class="validation-features">
      <div class="feature-item">
        <h4>ğŸ¯ ValidaciÃ³n en Tiempo Real</h4>
        <p>Los campos se validan mientras el usuario escribe</p>
      </div>
      <div class="feature-item">
        <h4>ğŸ”„ ValidaciÃ³n AsÃ­ncrona</h4>
        <p>El email se valida contra el servidor (simulado)</p>
      </div>
      <div class="feature-item">
        <h4>ğŸ’« AnimaciÃ³n de Error</h4>
        <p>Los campos invÃ¡lidos muestran animaciÃ³n de "shake"</p>
      </div>
      <div class="feature-item">
        <h4>ğŸ¨ Estados Visuales</h4>
        <p>Colores y bordes cambian segÃºn el estado de validaciÃ³n</p>
      </div>
    </div>
  </section>

  <!-- Resumen de ImplementaciÃ³n -->
  <section class="implementation-summary">
    <h2>ğŸ¯ Directivas Personalizadas Implementadas</h2>
    <div class="summary-grid">
      <div class="summary-card">
        <h3>TooltipDirective</h3>
        <ul>
          <li><code>@HostListener</code> para eventos mouse</li>
          <li><code>@Input</code> para configuraciÃ³n</li>
          <li><code>Renderer2</code> para creaciÃ³n segura</li>
          <li>Posicionamiento dinÃ¡mico inteligente</li>
          <li>Cleanup automÃ¡tico en destroy</li>
        </ul>
      </div>
      
      <div class="summary-card">
        <h3>LazyLoadDirective</h3>
        <ul>
          <li><code>@HostBinding</code> para clases CSS</li>
          <li><code>IntersectionObserver</code> para viewport</li>
          <li>Manejo de estados: loading, loaded, error</li>
          <li>Placeholders personalizables</li>
          <li>OptimizaciÃ³n de performance</li>
        </ul>
      </div>
      
      <div class="summary-card">
        <h3>ValidationFeedbackDirective</h3>
        <ul>
          <li><code>@HostBinding</code> con getters</li>
          <li><code>@HostListener</code> para eventos form</li>
          <li>Estados: valid, invalid, pending</li>
          <li>Mensajes dinÃ¡micos con <code>Renderer2</code></li>
          <li>Animaciones de feedback visual</li>
        </ul>
      </div>
    </div>

    <div class="key-concepts">
      <h3>ğŸ”‘ Conceptos Clave Aplicados</h3>
      <div class="concepts-grid">
        <div class="concept-item">
          <h4>ElementRef + Renderer2</h4>
          <p>Acceso seguro al DOM nativo sin manipulaciÃ³n directa</p>
        </div>
        <div class="concept-item">
          <h4>HostListener</h4>
          <p>Escucha eventos del elemento host de forma declarativa</p>
        </div>
        <div class="concept-item">
          <h4>HostBinding</h4>
          <p>Modifica propiedades del host reactivamente</p>
        </div>
        <div class="concept-item">
          <h4>Lifecycle Hooks</h4>
          <p>GestiÃ³n de recursos y cleanup en ngOnDestroy</p>
        </div>
      </div>
    </div>
  </section>
</div>
