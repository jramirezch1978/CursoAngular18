<div class="notifications-container">
  <!-- Header -->
  <header class="notifications-header">
    <h1>ğŸ”” Centro de Notificaciones - PROVIAS</h1>
    <p class="subtitle">DemostraciÃ³n de Notification Service con Signals</p>
    
    <div class="header-actions">
      <button class="btn btn-primary" (click)="showDemoNotifications()">
        ğŸ¯ Mostrar Demos
      </button>
      @if (hasNotifications()) {
        <button class="btn btn-warning" (click)="clearAll()">
          ğŸ§¹ Limpiar Todo
        </button>
      }
    </div>
  </header>

  <!-- Estado sin notificaciones -->
  @if (!hasNotifications()) {
    <div class="empty-state">
      <div class="empty-icon">ğŸ””</div>
      <h2>No hay notificaciones</h2>
      <p>Cuando recibas notificaciones del sistema, aparecerÃ¡n aquÃ­</p>
      <button class="btn btn-primary" (click)="showDemoNotifications()">
        ğŸ¯ Ver Notificaciones de Ejemplo
      </button>
    </div>
  } @else {
    <!-- Lista de notificaciones -->
    <div class="notifications-list">
      <div class="list-header">
        <h2>ğŸ“‹ Notificaciones Activas ({{ notifications().length }})</h2>
        <button class="btn btn-secondary btn-sm" (click)="clearAll()">
          ğŸ—‘ï¸ Limpiar Todo
        </button>
      </div>

      <div class="notifications-grid">
        @for (notification of notifications(); track notification.id) {
          <div 
            class="notification-card"
            [class]="getNotificationClass(notification.type)"
            [attr.data-type]="notification.type">
            
            <!-- Header de la notificaciÃ³n -->
            <div class="notification-header">
              <div class="notification-icon">
                {{ getNotificationIcon(notification.type) }}
              </div>
              <div class="notification-title">
                {{ notification.title }}
              </div>
              <button 
                class="notification-close"
                (click)="removeNotification(notification.id)"
                title="Cerrar notificaciÃ³n">
                Ã—
              </button>
            </div>

            <!-- Contenido de la notificaciÃ³n -->
            @if (notification.message) {
              <div class="notification-content">
                {{ notification.message }}
              </div>
            }

            <!-- Metadatos -->
            <div class="notification-meta">
              <span class="notification-time">
                ğŸ•’ {{ getTimeAgo(notification.timestamp) }}
              </span>
              @if (notification.duration && notification.duration > 0) {
                <span class="notification-duration">
                  â±ï¸ Auto-cierre: {{ notification.duration / 1000 }}s
                </span>
              } @else {
                <span class="notification-persistent">
                  ğŸ“Œ Persistente
                </span>
              }
            </div>

            <!-- AcciÃ³n (si existe) -->
            @if (notification.action) {
              <div class="notification-action">
                <button 
                  class="action-button"
                  (click)="executeAction(notification)">
                  {{ notification.action.label }}
                </button>
              </div>
            }

            <!-- Indicador de tipo -->
            <div class="notification-type-indicator" [attr.data-type]="notification.type">
              {{ notification.type.toUpperCase() }}
            </div>
          </div>
        }
      </div>
    </div>
  }

  <!-- EstadÃ­sticas en tiempo real -->
  <section class="notification-stats">
    <h2>ğŸ“Š EstadÃ­sticas de Notificaciones</h2>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ””</div>
        <div class="stat-content">
          <h3>{{ notifications().length }}</h3>
          <p>Total Activas</p>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <h3>{{ notifications().filter(n => n.type === 'success').length }}</h3>
          <p>Ã‰xito</p>
        </div>
      </div>

      <div class="stat-card error">
        <div class="stat-icon">âŒ</div>
        <div class="stat-content">
          <h3>{{ notifications().filter(n => n.type === 'error').length }}</h3>
          <p>Errores</p>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">âš ï¸</div>
        <div class="stat-content">
          <h3>{{ notifications().filter(n => n.type === 'warning').length }}</h3>
          <p>Advertencias</p>
        </div>
      </div>

      <div class="stat-card info">
        <div class="stat-icon">â„¹ï¸</div>
        <div class="stat-content">
          <h3>{{ notifications().filter(n => n.type === 'info').length }}</h3>
          <p>InformaciÃ³n</p>
        </div>
      </div>

      <div class="stat-card persistent">
        <div class="stat-icon">ğŸ“Œ</div>
        <div class="stat-content">
          <h3>{{ notifications().filter(n => !n.duration || n.duration === 0).length }}</h3>
          <p>Persistentes</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SecciÃ³n Educativa -->
  <section class="educational-section">
    <h2>ğŸ“ Conceptos Demostrados</h2>
    <div class="concepts-grid">
      
      <div class="concept-card">
        <h3>ğŸ”” Notification Service</h3>
        <p>Servicio centralizado para mostrar notificaciones del sistema</p>
        <code>@Injectable({ providedIn: 'root' })</code>
      </div>

      <div class="concept-card">
        <h3>ğŸ“Š Signals Reactivos</h3>
        <p>Estado que se actualiza automÃ¡ticamente en la UI</p>
        <code>notifications = this.notificationService.notifications;</code>
      </div>

      <div class="concept-card">
        <h3>ğŸ’‰ inject() Function</h3>
        <p>InyecciÃ³n moderna de dependencias sin constructor</p>
        <code>private readonly service = inject(NotificationService);</code>
      </div>

      <div class="concept-card">
        <h3>â±ï¸ Auto-Dismiss</h3>
        <p>Notificaciones que se cierran automÃ¡ticamente despuÃ©s de un tiempo</p>
        <code>duration: 5000 // 5 segundos</code>
      </div>

      <div class="concept-card">
        <h3>ğŸ¯ Acciones Interactivas</h3>
        <p>Notificaciones con botones de acciÃ³n personalizados</p>
        <code>action: { label: 'Ejecutar', callback: () => {} }</code>
      </div>

      <div class="concept-card">
        <h3>ğŸ”„ Estado Compartido</h3>
        <p>Estado del servicio compartido entre mÃºltiples componentes</p>
        <code>// AutomÃ¡tico con signals! ğŸ‰</code>
      </div>

    </div>
  </section>

  <!-- GuÃ­a de uso -->
  <section class="usage-guide">
    <h2>ğŸ“š GuÃ­a de Uso del Notification Service</h2>
    <div class="guide-content">
      
      <div class="guide-section">
        <h3>ğŸŸ¢ Notificaciones de Ã‰xito</h3>
        <code>this.notificationService.success('Â¡OperaciÃ³n exitosa!', 'Mensaje descriptivo');</code>
        <p>Ãšsalas para confirmar acciones completadas exitosamente</p>
      </div>

      <div class="guide-section">
        <h3>ğŸ”´ Notificaciones de Error</h3>
        <code>this.notificationService.error('Error del sistema', 'DescripciÃ³n del error');</code>
        <p>Ãšsalas para informar sobre errores que requieren atenciÃ³n</p>
      </div>

      <div class="guide-section">
        <h3>ğŸŸ¡ Notificaciones de Advertencia</h3>
        <code>this.notificationService.warning('Advertencia', 'InformaciÃ³n importante');</code>
        <p>Ãšsalas para alertar sobre situaciones que requieren precauciÃ³n</p>
      </div>

      <div class="guide-section">
        <h3>ğŸ”µ Notificaciones Informativas</h3>
        <code>this.notificationService.info('InformaciÃ³n', 'Datos relevantes');</code>
        <p>Ãšsalas para proporcionar informaciÃ³n general al usuario</p>
      </div>

      <div class="guide-section">
        <h3>âš™ï¸ Notificaciones Personalizadas</h3>
        <code>this.notificationService.show({ type: 'info', title: 'Custom', action: {...} });</code>
        <p>Ãšsalas para casos especÃ­ficos con configuraciones avanzadas</p>
      </div>

    </div>
  </section>

  <!-- Footer -->
  <footer class="notifications-footer">
    <p>ğŸ’¡ <strong>Nota para estudiantes:</strong> Este sistema de notificaciones demuestra cÃ³mo crear 
       servicios reutilizables con Signals, gestiÃ³n de estado reactivo, y comunicaciÃ³n entre componentes 
       de manera desacoplada. Observa cÃ³mo las notificaciones se sincronizan automÃ¡ticamente en toda la aplicaciÃ³n.</p>
  </footer>
</div>
